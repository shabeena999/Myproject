<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/signup.css" type="text/css" />
    <link
      rel="icon"
      href="https://www.shutterstock.com/image-vector/map-pointer-car-icon-vector-600w-133330619.jpg"
      type="image/jpg"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script
      src="https://kit.fontawesome.com/a59b9b09ab.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="model">
      <form
        id="signup"
        style="border-radius: 16px"
        class="model-content animate"
      >
        <div class="container">
          <h
            style="
              align-items: center;
              color: white;
              font-size: 30px;
              margin-left: 5%;
            "
          >
            Sign Up </h
          ><br /><br />
          <h style="color: #abb3b8; margin-left: 5%">
            Sign Up to get your dream car</h
          >
          <br />
          <!-- <h style="color: #abb3b8; margin-left: 5%"> F </h> -->
          <br /><br />
          <label class="user" for="uname"><b>Username</b></label
          >&emsp;&emsp;&nbsp;&nbsp;
          <input
            class="inp"
            type="email"
            placeholder="Enter Email"
            name="email"
            id="email"
            required
          />
          <br /><br />
          <label class="user" for="psw"><b>Password</b></label
          >&emsp;&emsp;&nbsp;&nbsp;
          <input
            class="inp2"
            type="password"
            placeholder="Enter Password"
            name="psw"
            id="psw"
            required
          />
          <br /><br />
          <label class="user" for="cpsw"><b>Password</b></label
          >&emsp;&emsp;&nbsp;&nbsp;
          <input
            class="inp2"
            type="password"
            placeholder="Confirm Password"
            name="cpsw"
            id="cpsw"
            required
          />
          <br /><br />
          <label class="user" for="uname"><b>Mobile Number</b></label>
          <input
            class="inp"
            type="text"
            id="number"
            name="number"
            maxlength="10"
            pattern="\d{10}"
            title="Please enter exactly 10 digits"
            placeholder="Enter Mobile Number"
            required
          />
          <input type="hidden" name="registerUser" id="" />
          <br /><br /><br /><br />
          <span id="error"></span>
          <div class="button-wrapper">
            <button class="button1" type="submit" style="width: 100px">
              Sign Up
            </button>
            <button class="button1" type="reset">Clear</button>
            <input
              class="button1"
              type="button"
              value="Go back!"
              onclick="history.back()"
              style="text-align: center"
            />
          </div>
          <br />
        </div>
      </form>
    </div>
  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    // $(document).ready(function () {
    //   $(".signup-form form .fa-times").click(function () {
    //     window.location = "./index.php";
    //   });
    // });

    var df = document.getElementById("signup");
    df.addEventListener("submit", function (e) {
      e.preventDefault();
      var pass = document.getElementById("psw").value;
      var cpass = document.getElementById("cpsw").value;
      console.log(pass + "  " + cpass);
      if (pass != cpass) {
        window.alert("Password doesnot match");
        return;
      }
      var email = document.getElementById("email").value;
      var number = document.getElementById("number").value;
      $.ajax({
        type: "POST",
        url: "/signup",
        // url: "http://localhost:3001/signup",
        dataType: "json",
        data: { username: email, password: pass, Mobile: number },
        success: function (data) {
          console.log(data.message);
          if (data.message === "User Registration Successful") {
            alert("User Registration Successful Please login");
            window.location = "./index.html";
          } else {
            alert("User registration failed");
          }
        },
      });
    });
  </script>
</html>
